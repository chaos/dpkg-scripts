2009-04-17 Jim Garlick <garlick@llnl.gov>

	* : tag 1.66

	* dpkg-tmplocal.c : Fix getopt_long() to stop option processing
	at the first non-option argument [Mark Grondona]

2009-03-16 Jim Garlick <garlick@llnl.gov>

	* : tag 1.65

	* dpkg-tmplocal.c : Added -o (--slash-opt) option.

2008-05-14 Jim Garlick <garlick@llnl.gov>

	* dpkg-wrap.sh : Don't override PATH in script as it affects
	the user's environment (Ref: chaos bug 454).

	* dpkg-mkdeb.sh, dpkg-testdeb.sh : Call dpkg-tmplocal with -- 
	arg termination.

2008-08-05 Jim Garlick <garlick@llnl.gov>

	* dpkg-mkdeb.sh : Redirect output when sourcing package.conf to 
	avoid confusing any output generated by the user's script with 
	variables subsequently echoed.

	* tests/83.conf, tests/83.qsrc : Regression test for above.

2008-04-25 Jim Garlick <garlick@llnl.gov>

	* dpkg-tmplocal.c : Add --verbose, --preserve, and --dir options.

	* dpkg-tmplocal.8 : Updated with new options.

2008-04-22 Jim Garlick <garlick@llnl.gov>

	* dpkg-verify.c : Eliminate an extra lstat() in find_unpackaged().

2008-04-22 Jim Garlick <garlick@llnl.gov>

	* : tag 1.64

	* dpkg-mkdeb : Add 'dkhidedefault' and 'dkhidemain'.  Hide 
	default dotkit only if 'dkhidedefault' or 'dkhide' flags are set.

	* dpkg-mkdeb.8 : Document new flags.

	* tests/71.conf : Default dotkits are no longer hidden by default.

	* tests/80.conf, tests/81.conf, tests/82.conf : Test various
	permutations of dkhide* flags.

	* tests/78.conf : Similar to rather complicated mvapich package.conf.

2008-04-20 Jim Garlick <garlick@llnl.gov>

	* : tag 1.63

	* dpkg-verify.c : Add -u option to report unpackaged files.

	* dpkg-nonpackaged.sh, dpkg-nonpackaged.8 : Removed.

2008-04-19 Jim Garlick <garlick@llnl.gov>

	* dpkg-verify.c, base64.[ch], md5sum.[ch] : New.

	* list.[ch] : New from lsd-tools.

	* dpkg-verify.sh : Removed.
	
2008-04-11 Jim Garlick <garlick@llnl.gov>

	* dpkg-mkdeb.sh : Fix bugs in linkdata2 handling:
	- Call check_mfile on linkdata2 not linkdata after generation.
	- Call base64 with -w 0 to avoid line wraps in base64 string.

	* dpkg-verify.sh : Fix bug in linkdata2 handling:
	- Call base64 with -w 0.

	* test/79.conf : New test for long symlink target.

2008-04-10 Jim Garlick <garlick@llnl.gov>

	* : tag 1.62

	* dpkg-mkdeb.sh : Fix a bug in '-q default' query for packages
	with no subpackages.

	* dpkg-mkdeb.sh : Added -m option to override META path.

	* dpkg-mkdeb.sh : Added '-q basename' and '-q basever' queries.

	* test/runtestsquery, test/*.qsrc : Add dpkg-mkdeb query tests.

	* test/78.conf : Copy of mvapich package.conf.

2008-04-09 Jim Garlick <garlick@llnl.gov>

	* : tag 1.61

	* dpkg-mkdeb.sh : Add '-q default' query to list default packages.
	Drop default packages from '-q names'  query.

2008-04-09 Jim Garlick <garlick@llnl.gov>

	* : tag 1.60

	* dpkg-mkdeb.sh : Revert previous change as it subtly altered 
	quote hanlding and broke several packages.

	* tests/77.conf : Regression test for above breakage.

2008-04-08 Jim Garlick <garlick@llnl.gov>

	* : tag 1.59 - BROKEN DO NOT USE

	* dpkg-mkdeb.sh : Cache PKG_* values from package.conf for speed.
	
2008-03-20 Jim Garlick <garlick@llnl.gov>

	* : tag 1.58

	* dpkg-wrap.sh : If dpkg_flags contains 'verboselog' then
	log arguments.

	* dpkg-mkdeb.sh : Allow 'verboselog' as an option.  
	Just pass through to dpkg_flags macro for testing by dpkg-wrap.sh.

2008-02-28 Jim Garlick <garlick@llnl.gov>

	* : tag 1.57

	* dpkg-wrap.sh : Drop arguments from cmd logging.

2008-02-21 Jim Garlick <garlick@llnl.gov>

	* : tag 1.56

	* *.sh : Change hash-bang to #!/bin/bash --posix.  The --posix arg
	causes bash to ignore BASH_ENV, currently a source of latency on LC
	systems.

	* dpkg-wrap.sh : Call /usr/bin/dpkg-logger to avoid PATH lookup.

	* dpkg-logger.sh : Call /usr/bin/logger to avoid PATH lookup.

	* dpkg-mkdeb.sh : Generate wrapper scripts with the above hash-bang.

	* dpkg-defaults.sh : New.

	* dpkg-defaults.8 : New.

2008-02-15 Jim Garlick <garlick@llnl.gov>

	* : tag 1.55

	* dpkg-mkdeb.sh : On failure, do not send the logfile to stderr if
	we are already running with -v (verbose mode).

	* dpkg-mkdeb.sh : If !notmproot && !topt, use a tmplocal for the
	buildrequires but install into a regular tmproot.

	* dpkg-mkdeb.sh : Add "-q all" query.  
	Include versions in "-q names" query.

	* dpkg-docreport.sh : Change color scheme to white and gray.

2008-02-14 Jim Garlick <garlick@llnl.gov>

	* dpkg-mkdeb.sh : Add dpkg-mkdeb -q names query to list all
	possible package names produced by this package.conf.

2008-02-12 Jim Garlick <garlick@llnl.gov>

	* : tag 1.54

	* dpkg-mkdeb.sh : lcc integration [Adam Moody]:
	- New macro, $pkgname for "munged" name of package.
	- New macro, $lccdir, for directory for lcc plugin files.
	- Symlink lcc plugins, if any, from default package.

2008-02-09 Jim Garlick <garlick@llnl.gov>

	* dpkg-mkdeb.sh : Add $dpkg_default to package macros file.

2008-02-05 Jim Garlick <garlick@llnl.gov>

	* dpkg-mkdeb.sh : Generate an appropriate error if PKG_DEFAULT 
	contains embedded spaces.

	* test/73.conf : Regression test for above.

2008-02-05 Jim Garlick <garlick@llnl.gov>

	* dpkg-mkdeb.sh : Ensure that packaged directories are owner-writeable
	so that dpkg --force-not-root dosen't fail to extract tar archive.

	* dpkg-mkdeb.sh : Always parse version out of PKG_NAME using the
	same algorithm (first hyphen followed by a number) rather than using
	PKG_DEFAULT as hint if set.  Verify that PKG_DEFAULT is set to 
	exactly the package base name using this parsing method.

	* test/72.conf : Regression test for PKG_DFEAULT check above.

2008-02-01 Jim Garlick <garlick@llnl.gov>

	* : tag 1.53

	* dpkg-runtests.sh : Add -V option to show output on success.

	* dpkg-mkdeb.sh : Check PKG_FLAGS for validity.

	* test/69.conf : Test for above.

	* dpkg-mkdeb.sh : Add 'dkhide' flag.

	* test/[70-71].conf : Tests for above.

	* dpkg-mkdeb.sh : Add ${dotkitdir} (= /usr/local/etc/dotkit) to 
	package macros.

2008-01-31 Jim Garlick <garlick@llnl.gov>

	* dpkg-mkdeb.sh : Make direct installation the default, unless the
	-t (tmproot) option is used.  If PKG_FLAGS contains 'notmproot', the
	-t option has no effect.

	* test/24.conf : Handle different behavior under direct installation.

2008-01-30 Jim Garlick <garlick@llnl.gov>

	* dpkg-mkdeb.sh : Fix bug where $dpkg_depends was being set to
	$dpkg_section value in installed macros file.

2008-01-30 Jim Garlick <garlick@llnl.gov>

	* : tag 1.52

	* README : Removed (out of date).

	* dpkg-mkdeb.sh : Remove support for preinst, prerm, postinst, postrm
	scripts.

	* dpkg-mkdeb.sh : Add 'nocheckwrap' flag to disable checking for
	existence of wrapped executables (e.g. to support wrapping of 
	unpackaged files).

	* dpkg-mkdeb.sh : Add 'nodashwrap' flag to alter the naming of
	wrappers from name-version to nameversion.

	* test/[66-68].conf : New, tests for nocheckwrap, nodashwrap flags.

	* dpkg-unpackaged.sh : Stop ignoring alternatives symlinks now
	that we have deprecated the use of alternatives.

	* dpkg-mkdeb.sh : Stop removing /usr/local/etc/alternatives from 
	tmplocal.

	* test/46.conf : Reverse sense now that scriptlets are disabled.

2008-01-29 Jim Garlick <garlick@llnl.gov>

	* : tag 1.51

	* dpkg-mkdeb.sh : Allow =version_glob in PKG_BUILDREQUIRES packages.

2008-01-28 Jim Garlick <garlick@llnl.gov>

	* : tag 1.50

	* dpkg-mkdeb.sh : Handle files containing embedded spaces:
	- When creating md5sums file
	- New linkdata2 format containing base64 encoding of link target

	* dpkg-verify.sh : Cleanup, handle files containing embedded spaces:
	- When verifying md5sums file
	- When verifying linkdata file
	- Add linkdata2 file support
	- Fix bug where exit code was zero on some failures.

	* tests/[62-65].conf : New, test cases for above.

	* tests/54.conf : Update for linkdata2 file format.

2008-01-24 Jim Garlick <garlick@llnl.gov>

	* dpkg-mkdeb.sh : Run subpackage list and variants list through
	split() to convert commas to spaces in dpkg-mkdeb -q output.

	* dpkg-mkdeb.sh : Change die() and warn() so newlines in split
	lists are not reproduced faithfully in output, e.g. to fix
	missing variant error.

2008-01-24 Jim Garlick <garlick@llnl.gov>

	* : tag 1.49

	* dpkg-wrap.sh : Exec command to avoid altering the appearance of 
	command failures.  This means the exit code of the command cannot
	be logged.

	* dpkg-mkdeb.sh : Put upper case restriction on PKG_NAME back
	in place due to potential problems with apt.

	* dpkg-mkdeb.sh : New PKG_SECTION values: 'storage' and 'viz'.

2008-01-17 Jim Garlick <garlick@llnl.gov>

	* : tag 1.48

2008-01-16 Jim Garlick <garlick@llnl.gov>

	* dpkg-mkdeb.sh : Add PKG_VARIANTS and the following features:
	- option -V to select variant
	- option -q to query package information
	- flag 'variantsconflict' to auto-generate Conflicts: for variants.

	* tests/[57-61].conf : New tests for variants.

	* dpkg-runtests.sh : Add -v option to cat test log on failure.

2008-01-16 Mark Grondona <mgrondona@llnl.gov>

	* dpkg-testdeb.sh : Make list of package names prettier.
	Run dpkg-runtests with -v if dpkg-testdeb is in verbose mode.

2008-01-15 Jim Garlick <garlick@llnl.gov>

	* : tag 1.47

	* dpkg-mkdeb.sh : Put all intermediate build products under one
	tmp directory.  Implement -k option to preserve that directory
	for examination.

	* dpkg-mkdeb.sh : Implement PKG_CONFLICTS.

2008-01-14 Jim Garlick <garlick@llnl.gov>
* dpkg-mkdeb.sh : Relax upper case restriction on PKG_NAME for
	Greg Lee.

	* tests/56.conf : New, check that mixed case in PKG_NAME is
	preserved through to control file.

	* tests/55.conf : Fix to reflect 'export' now present in macros file.

	* dpkg-mkdeb.sh : Fix install_buildrequires() to fail rather than
	just warn if apt-userinst fails (reported by John Gyllenhaal).

2008-01-11 Jim Garlick <garlick@llnl.gov>

	* : tag 1.46

	* dpkg-mkdeb.sh : Fix bug where macros variables were not exported.

	* dpkg-wrap.sh : Fix bug in construction of path to macros file.

2008-01-11 Jim Garlick <garlick@llnl.gov>

	* : tag 1.45

	* dpkg-runtests.8 : Added some useful information for test authors.

	* dpkg-verify.8 : Added additional information about verification.

	* dpkg-mkdeb.sh : Fix bug where removal of buildrequires packages
	from private /usr/local would always fail.

2008-01-10 Jim Garlick <garlick@llnl.gov>

	* : tag 1.44

	* dpkg-mkdeb.sh : Add a 'macros' metadata file which can be sourced
	by test scripts, etc.  Include $PKG_*, $subpackage, $prefix, and
	all the other vars derived from ${prefix}.

	* test/55.conf : New, check new 'macros' file for correct content.

	* dpkg-logger.sh : Add -p pkg option.  Source package macros file.

	* dpkg-mkdeb.sh : When building dotkits, do not set $dpkg_name, 
	$dpkg_version, or $dpkg_prefix.  Call dpkg-logger with -p option.

	* dpkg-wrap.sh : Call dpkg-logger with -p option.  Source package 
	macros file.

2008-01-09 Mark Grondona <mgrondona@llnl.gov>

	* dpkg-scripts.spec : Package dpkg-testdeb*

	* dpkg-testdeb.sh, dpkg-testdeb.8 : New script for testing deb
	  packages standalone using dpkg-tmplocal and apt-userinst.
	
2008-01-09 Jim Garlick <garlick@llnl.gov>

	* : tag 1.43

	* dpkg-runtests.sh : Clean up exit codes:
	- If dpkg-runtests.sh itself failed, exit with code 1.
	- If any tests failed, exit with code 2.
	- Otherwise exit 0 even if test results include 'notest' or 'notrun'.

	* dpkg-mkdeb.sh : Add a 'linkdata' metadata file to record link
	targets of symbolic links so dpkg-verify.sh can check them.

	* dpkg-verify.sh : Verify symlinks in 'linkdata' file, if it exists.

	* test/54.conf : New, verify that files result in md5sums entry,
	and symlinks result in linkdata entry.

	* dpkg-mkdeb.sh : Fix error handling in install_subpackages() and
	remove_subpackages().  Skip calling dpkg-initialize now that 
	apt-userinst does it.

	* test/103.conf : New, verify that notmproot and PKG_BUILDREQUIRES
	with unknown package fails gracefully.

	* dpkg-mkdeb.sh : Reinitialize PATH, LD_LIBRARY_PATH, and dotkit 
	environment variables.

2008-01-08 Jim Garlick <garlick@llnl.gov>

	* dpkg-verify.sh : Check file uid/gid against uid/gid of
	/usr/local/dpkg-db to support user-owned /usr/locals [Mark Grondona].

	* dpkg-mkdeb.sh : Add /usr/sbin:/sbin to PATH so we can call dpkg.

	* dpkg-mkdeb.sh : Make install_buildrequires() and
	remove_buildrequires() errors fatal.

2008-01-08 Jim Garlick <garlick@llnl.gov>

	* : tag 1.42

	* dpkg-mkdeb.sh : Handle PKG_BUILDREQUIRES with PKG_FLAGS=notmproot.

2008-01-07 Jim Garlick <garlick@llnl.gov>

	* dpkg-runtests.sh : runtests improvements [Mark Grondona]:
	- Allow a package glob to be specified in addition to a list of 		  packages to constrain the packages for which tests are run.  
	- Output "notest" instead of "notrun" if a test doesn't exist, 
	  to differentiate between tests that don't exist, and those that 
	  exist but failed to run for some reason. 
	- Create one top-level directory for all dpkg-runtests output.

2008-01-05 Jim Garlick <garlick@llnl.gov>

	* : tag 1.41

	* dpkg-mkdeb.sh : Find compressed man pages too.

	* test/53.conf : Add test for man page inclusion for wrappers.

2008-01-04 Jim Garlick <garlick@llnl.gov>

	* : tag 1.40

	* dpkg-wrap.sh : Fix bug in dotkit initialization.
	Fine tune recursion detection so wrappers of one package can call
	wrappers of another package.

	* dpkg-logger.sh : Don't complain if dotkit doesn't set dpkg_name
	or dpkg_version, just omit that info from the log.  This might occur
	in a custom (badly formed) dotkit.  Also add -D option for debugging.

	* dpkg-mkdeb.sh : New package options:
	- noldpath - if set, do not put LD_LIBRARY_PATH settings in dotkit
	- dkmutex - if set, dotkit should unuse other versions of the package

	* dpkg-mkdeb.sh : Try to include a man page symlink for each wrapper
	added to /usr/local/bin.

	* test/50.conf : New, check for LD_LIBRARY_PATH in dotkit.

	* test/51.conf : New, verify that noldpath flag works.

	* test/52.conf : New, verify that dkmutex flag works.

2008-01-03 Jim Garlick <garlick@llnl.gov>

	* : tag 1.39

	* dpkg-mkdeb.sh : Change dependency string in default package from 
	"name(=version)" to "name (= version)" to satisfy apt requirement.

	* dpkg-mkdeb.sh : Fix check_doc so references to dangling symlinks
	are OK since package is not yet installed in destination.

2008-01-03 Jim Garlick <garlick@llnl.gov>

	* : tag 1.38

	* dpkg-mkdeb.8 : Clarify UNIT TESTS section.

	* test/46.conf : Add check for macro expansion.

	* dpkg-mkdeb.sh : Fix make_dk to allow bin, man, info to be 
	danging symbolic links and still qualifiy for dk_alter.

	* dpkg-mkdeb.sh : - Check make_wrappers return value.
	- Abort make_wrappers if PKG_WRAPPERS is set and PKG_SECTION=root.

	* dpkg-mkdeb.sh : Enforce debian policy manual restrictions
	on PKG_NAME in in get_pkg_name().

	* test/47.conf : New, PKG_WRAPPERS includes nonexistant file.

	* test/48.conf : New, PKG_WRAPPERS and PKG_SECTION=root.

	* test/49.conf : New, slash in PKG_NAME.

2008-01-03 Jim Garlick <garlick@llnl.gov>

	* : tag 1.37

	* dpkg-mkdeb.sh : Small cleanup in main_package_metadata().

	* dpkg-mkdeb.8 : Cleanup, various updates to reflect 1.36 changes.

	* test/45.conf : New test for PKG_conffiles.

	* test/46.conf : New test for PKG_preinst, postinst, prerm, postrm.

2008-01-02 Jim Garlick <garlick@llnl.gov>

	* dpkg-mkdeb.sh : Rename PKG_CATEGORY to PKG_DK_CATEGORY,
	PKG_HELP to PKG_DK_HELP.  Old names still work with warning.

	* dpkg-mkdeb.sh : Fix bug in multi-line PKG_DK_HELP expansion.

	* test/43.conf : New test for multi-line PKG_DK_HELP expansion

	* test/44.conf : New test for PKG_DK_CATEGORY.

2007-12-28 Jim Garlick <garlick@llnl.gov>

	* : tag 1.36

	* test/* : Add more tests.

	* dpkg-mkdeb.sh : Fix problems uncovered by testing:
	- Don't use echo -n to expand PKG_* variables [tests 15, 16, 42]
	- Detect malformed PKG_doc content [test 39].
	- Missing dotkit content in default package [test 30].

	* dpkg-mkdeb.sh : Add some hooks for testing:
	- Add stealth -o option to set output deb file name for main package.
	- Add stealth -O option to set output deb file name for dflt package.
	- Add stealth -x option to set path to dpkg-mkdeb for recursion.
	- Add stealth -S option to disable snapshot.

	* dpkg-mkdeb.sh : Change default package design yet again:
	- Change pkg name (and dotkit, prefix) from 'pkg-default' to 'pkg'.
	- Change pkg vers from 'basever-vers' to 'default-basever-vers'.

	* dpkg-mkdeb.sh : More cleanup:
	- Don't call die in subshells invoked with $(function).
	- Don't use "local var=$(function) || die message"
	- Don't use "function | filter || die message"
	- Don't cat the copy/build/install log for other types of errors.

2007-12-27 Jim Garlick <garlick@llnl.gov>

	* dpkg-mkdeb.sh : Further cleanup and hooks for testing:
	- Build default and main packages in separate roots.
	- Drop special case default dotkit (now pkg-default, not pkg).
	- Drop special case package prefix (now pkg-default, not pkg).
	- Apply heuristic to determine package "base version" if PKG_WRAPPERS
	  and PKG_DEFAULT is not defined.
	- Revert change to create ${tmproot}${prefix} directory.
	
	* dpkg-wrap.sh : Add an environment variable to detect recursion.

	* dpkg-tmplocal.c : Detect non-zero child exit code and return it.

	* test/* : New test suite.

	* NEWS : New release notes.

2007-12-23 Jim Garlick <garlick@llnl.gov>

	* dpkg-lndir.c : Add separate roots for from and to.

2007-12-21 Jim Garlick <garlick@llnl.gov>

	* dpkg-wrap.sh : Fix bug in quoted argument handling.
	Make failure to load dotkit fatal to avoid possible infinite recursion.

	* dpkg-mkdeb.sh : Gratuitous renaming and repositioning of functions.

	* dpkg-mkdeb.sh : Add support for default packages.
	- Generate default package if PKG_DEFAULT is defined.
	- Define ${dotkitdir} macro to /usr/local/etc/dotkit.
	- Generate wrapper scripts if PKG_DEFAULT and PKG_WRAPPERS is defined.
	- Deprecate "file" mode for all metadata files except package.test.
	- Deprecate "PKG_dk" mode for dotkit (suppress with PKG_FLAGS=nodk).
	- Allow PKG_FLAGS to be comma or space separated.

2007-12-20 Jim Garlick <garlick@llnl.gov>

	* dpkg-lndir.c : New implementation of lndir that takes
	a tmproot argument.

2007-12-19 Jim Garlick <garlick@llnl.gov>

	* dpkg-mkdeb.sh : Major cleanup and restructuring:
	- Push mainline code into shell functions.
	- Use only accessors to access package.conf settings.
	- Added -v (verbose) option.
	- Put markers in log output to delinate when the package.conf 
	  functions are called.
	- Create ${tmproot}${prefix} directory before calling pkg_install().
	- Define ${lbindir} macro to /usr/local/bin
	- Create dotkits unless 'nodk' option is defined.
	- Allow either spaces or commas in PKG_BUILDREQUIRES.
	- Check package.conf early for parse errors.

2007-12-13 Jim Garlick <garlick@llnl.gov>

	* : tag 1.35

	* dpkg-mkdeb.sh : Do not emit empty Depends: to control file
	if PKG_DEPENDS is not defined.  Empty Depends: breaks apt.

2007-12-10 Mark Grondona <mgrondona@llnl.gov>

	* dpkg-verify.sh : Report broken symlinks as such instead
	  of reporting them as "missing"

2007-11-29 Jim Garlick <garlick@llnl.gov>

	* dpkg-scripts.spec : Require dpkg.

2007-11-28 Jim Garlick <garlick@llnl.gov>

	* dpkg-mkdeb.sh : Reverted PKG_WRAPPERS.

2007-11-27 Jim Garlick <garlick@llnl.gov>

	* : tag 1.34

	* dpkg-mkdeb.sh : Cleanup:
	- added PKG_WRAPPERS to automatically make scripts in /usr/local/bin.
	- unset OPTIND before calling getopt.
	- add -h|-? option to print usage message.
	- omit .svn directories when copying build source
	- notice early if package name/version conains _ character

2007-11-26 Jim Garlick <garlick@llnl.gov>

	* dpkg-mkdeb.sh : When searching for shared objects for dotkit, 
	follow a symlinked libdir.

2007-11-21 Jim Garlick <garlick@llnl.gov>

	* : tag 1.33

2007-11-20 Jim Garlick <garlick@llnl.gov>

	* dpkg-mkdeb.sh : Add PKG_PROVIDES.
	Add new PKG_FLAGS=decoupledk.

2007-11-20 Jim Garlick <garlick@llnl.gov>

	* : tag 1.32

	* dpkg-logger.sh : Add a -- to end logger argument list.

2007-11-19 Jim Garlick <garlick@llnl.gov>

	* : tag 1.31

	* dpkg-nonpackaged.sh : Deal if /usr/local is a symlink.
	Ignore files installed through alternatives system.
	Use a faster algorithm.

	* dpkg-logger.sh, dpkg-logger.8 : New.

	* dpkg-mkdeb.sh : Call dpkg-logger from package dotkits.
	Set dpkg_name, dpkg_version, and dpkg_prefix in dotkits.

	* dpkg-wrap.sh : Call dpkg-logger.

2007-11-16 Jim Garlick <garlick@llnl.gov>

	* : tag 1.30

	* dpkg-mkdeb.sh, dpkg-wrap.sh : Suppress dotkit logging when dotkit 
	is invoked by wrapper.

2007-11-15 Jim Garlick <garlick@llnl.gov>

	* : tag 1.29

	* dpkg-mkdeb.sh : Revert 'autowrap' feature.

	* *.sh : Change hash-bang header to invoke bash via /usr/bin/env.

	* dpkg-wrap.sh : Send a line to syslog local7.info every time
	wrapper is invoked.

	* dpkg-mkdeb.sh : Dotkit sends a line to syslog local7.info on 
	every use and unuse.

	* dpkg-mkdeb.sh : Added PKG_CATEGORY and PKG_HELP so custom
	dotkit #c and #h info can be provided.

2007-11-08 Jim Garlick <garlick@llnl.gov>

	* : tag 1.28

	* dpkg-mkdeb.sh : Add 'autowrap' flag.  If set:
	- create bin.wrap populated with wrappers for all executable bin files
	- dotkit does not alter LD_LIBRARY_PATH
	- dotkit alters PATH with bin.wrap not bin.

2007-10-31 Jim Garlick <garlick@llnl.gov>

	* dpkg-mkdeb.sh : Fix error redirection of find command.

2007-10-12 Jim Garlick <garlick@llnl.gov>

	* : tag 1.27

	* : Release approved, add required notices and disclaimers.

2007-09-26 Jim Garlick <garlick@llnl.gov>

	* dpkg-mkdeb.sh : Fix bug preventing PKG_postinst from working.

2007-09-24 Jim Garlick <garlick@llnl.gov>

	* : tag 1.26

	* dpkg-mkdeb.sh : Chdir to tmpsrc before reading meta files.

	* dpkg-mkdeb.sh : If META file exsists in repo, parse it and set
	environment vars that can be referenced from the package.conf file,
	e.g. $meta_name, $meta_version, $meta_release.

2007-09-21 Jim Garlick <garlick@llnl.gov>

	* : tag 1.25

	* dpkg-mkdeb.sh : Unset dk_inuse to avoid errors if dotkit
	for buildrequiers package is already used.

	* dpkg-mkdeb.sh : Abort if package has both PKG_BUILDREQUIRES
	and PKG_FLAGS=notmproot since prereq packages will be over-mounted
	during package build.

	* dpkg-runtests.{sh,8} : Rename from dpkg-runtest (singular).

2007-09-20 Jim Garlick <garlick@llnl.gov>

	* : tag 1.24

	* dpkg-wrap.sh : Unset dk_inuse to avoid errors if dotkit
	for target package is already used.

	* doc/* : Check in review and release cruft.

	* dpkg-mkdeb.sh : In auto-generated dotkits, dk_alter LD_LIBRARY_PATH
	for any subdirs of ${prefix}/lib that contain shared library objects.

	* dpkg-mkdeb.sh : Use packages quietly.

2007-09-19 Jim Garlick <garlick@llnl.gov>

	* : tag 1.23

	* dpkg-mkdeb.sh : 
	- Avoid an extra copy in direct install mode.
	- Add PKG_BUILDREQUIRES.
	- Support subpackages.

	* dpkg-runtest.sh, dpkg-verify.sh : Check for installed package
	using dpkg -L, not dpkg -l which succedes on "available" packages.
	
	* scripts/build : Remove in favor of svn trick in Makefile.

2007-09-10 Jim Garlick <garlick@llnl.gov>

	* : tag 1.22

	* dpkg-wrap.sh, dpkg-wrap.8 : New.

	* dpkg-runtest.sh : Run commands via dpkg-wrap.sh.

2007-09-07 Jim Garlick <garlick@llnl.gov>

	* : tag 1.21

	* dpkg-mkdeb.sh : Drop package.env.

	* dpkg-scripts.spec : Add dependency on dpkg-dotkit rpm.

	* dpkg-runtest.sh : Initialize dpkg-dotkit and use/unuse package
	during test.

2007-09-03 Jim Garlick <garlick@llnl.gov>

	* : tag 1.20

	* dpkg-getsource.sh, dpkg-getsource.8 : New.

	* dpkg-mkdeb.sh : Create 'env' metadata file which is a sourceable
	bash script which sets up the documented packaging environment vars.

	* dpkg-runtest.sh : Source package.env file before running test 
	script.

	* dpkg-nonpackaged* : Rename from dpkg-unpackaged* [Adam Moody]

2007-08-22 Jim Garlick <garlick@llnl.gov>

	* : tag 1.19

	* dpkg-tmplocal.c : Deal properly with symlinks to directories.

2007-08-18 Jim Garlick <garlick@llnl.gov>

	* dpkg-tmplocal.c : Implement recursive remove rather than
	calling out to rm -r and having to sanitize environment,
	which cause some problems when executing dpkg-deb as real uid.

2007-08-13 Jim Garlick <garlick@llnl.gov>

	* : tag 1.18

	* dpkg-tmplocal.c : Fix cleanup bug and sanitize environment before
	running external commands as root [Chris Dunlap audit].

2007-08-10 Jim Garlick <garlick@llnl.gov>

	* : tag 1.17

	* dpkg-tmplocal.c : Bind mount a tmp directory on top of /usr/local
	instead of ramdisk which has size limitations.  Install setuid.

	* dpkg-tmplocal.8 : New.

	* dpkg-unpackaged.sh : Prune /usr/local/dpkg-db.

	* dpkg-unpackaged.8 : New.

	* dpkg-verify.8 : New.

	* dpkg-distro.sh : Removed.

	* dpkg-runtest.8 : New.

	* dpkg-runtest.sh : Move output to "test.log" in the test directory
	and retain the whole test directory on failure/notrun rather than just
	the log.

	* dpkg-docreport.8 : New.

	* dpkg-mkdeb.8 : New.

	* dpkg-mkdeb.sh : Comment out -r (rebuild) option in usage message.

2007-08-09 Jim Garlick <garlick@llnl.gov>

	* : tag 1.16

	* dpkg-runtest.sh : Run test inside a unique temporary directory.
	Preserve test log if result is 'notrun'.  Do not run time consuming
	package md5 verification.

	* dpkg-mkdeb.sh : Add -u option and PKG_FLAGS=notmproot support.
	Build a dotkit even if the prefix subdirs are symlinks (and contain 
	files).

	* dpkg-tmplocal.c : New.

	* dpkg-scripts.spec : Drop the noarch designation.

2007-08-07 Jim Garlick <garlick@llnl.gov>

	* : tag 1.15

	* dpkg-mkdeb.sh : Fixed order of redirections so output of pkg_build()
	and pkg_install() functions go to the right place.

2007-08-05 Jim Garlick <garlick@llnl.gov>

	* README : Added more information.

	* dpkg-mkdeb.sh : Removed -v option to fix package.conf function
	error detection.

2007-07-11 Jim Garlick <garlick@llnl.gov>

	* README : New.

	* dpkg-scripts.spec : Install dpkg-runtest.

2007-02-13 Jim Garlick <garlick@llnl.gov>

	* : tag 1.14-1

	* dpkg-distro.sh : New.

2007-01-14 Jim Garlick <garlick@llnl.gov>

	* : tag 1.13-1chaos

	* dpkg-runtest.sh, dpkg-verify.sh, dpkg-mkdeb.sh :
	Change dpkg admindir to /usr/local/dpkg-db per changes in dpkg.

	* Makefile, package.conf, dpkg-policy.conf : Removed.

	* dpkg-mkdeb-all.sh : Removed.

	* META, dpkg-scripts.spec : New.

2007-01-02 Jim Garlick <garlick@llnl.gov>

	* dpkg-mkdeb.sh : Prefix dotkit category with local-.
	Skip dotkit if there will be no active content.
	Generate dotkit dependencies.  Write all debs to cwd.

	* package.conf : Make default debrepo /usr/local/debs.
	
2007-01-02 Jim Garlick <garlick@llnl.gov>

	* : tag 12

	* dpkg-mkdeb.sh : Allow -p packagefile to be non-snapshot.
	Automatically generate dotkit file if not provided by package.

	* package.conf : Move package root back to /usr/local.

2006-12-22 Jim Garlick <garlick@llnl.gov>

	* : tag 11

	* dpkg-policy.conf : Added dotkitdir macro.

	* dpkg-mkdeb.sh : 
	- Added PKG_dotkit and dotkit file support.
	- Deprecated PKG_RELEASE.  
	- Add PKG_DEPENDS and PKG_SECTION.
	- Support root, opt, and tools package prefixes.
	- Change directory macros to be set relative to package prefix.
	- Force doc to contain only file refs that exist within the package.
	- Handle md5sums on empty package properly.
	- Add -v (verbose) option.

2006-12-15 Jim Garlick <garlick@llnl.gov>

	* : tag 1.0-10
	
	* dpkg-mkdeb-all.sh : Source dpkg-policy.conf from installed path 
	before repo path.  Use svn cat package.conf, which is more portable 
	to older subversions than svn export package.conf.

	* dpkg-mkdeb.sh : If subversion buildsrc, export package.conf
	and parse before exporting the rest of the package.
	Remove redundant parse_config call.  Abort package build before 
	populating tmpsrc if output deb file exists, unless -f.
	Source dpkg-policy.conf from installed path before repo path.

2006-12-14 Jim Garlick <garlick@llnl.gov>

	* : tag 1.0-9

	* dpkg-policy.conf : Add debrepo definition.

	* dpkg-mkdeb.sh : Build non-snapshot debs in debrepo.
	List name of package in progress messages.

	* dpkg-mkdeb-all.sh : New.

2006-12-12 Jim Garlick <garlick@llnl.gov>

	* : tag 1.0-8

	* dpkg-mkdeb.sh : Add -r option to rebuild package.  

	* dpkg-mkdeb.sh, dpkg-policy.conf : Use bash constants (declare -r).

	* dpkg-lint.sh : Add support for buildlog and buildinfo control files.

2006-12-11 Jim Garlick <garlick@llnl.gov>

	* : tag 1.0-7

	* dpkg-mkdeb.sh : Store build output in buildlog control file.
	Record source url or directory in buildinfo control file.
	Allow package source to be a directory other than ".".

2006-12-07 Jim Garlick <garlick@llnl.gov>

	* : tag 1.0-6

	* dpkg-mkdeb.sh : Validate PKG_ARCH.

2006-12-06 Jim Garlick <garlick@llnl.gov>

	* dpkg-verify.sh : Check ownership and mode of files.

	* : Add umask 022 and PATH=$PATH:/usr/local/bin to various scripts.

2006-12-06 Jim Garlick <garlick@llnl.gov>

	* : tag 1.0-5

	* dpkg-docreport.sh : Set umask 022.

	* dpkg-editdeb.sh : Set umask 022.  Use -p on tar extract commands.
	Insist that dpkg-editdeb not run as superuser.

	* dpkg-lint.sh : Set umask 022.  Use -p on tar extract commands.
	Insist that dpkg-lint not run as superuser.

	* dpkg-mkdeb.sh : Use -p on tar extract commands.

	* dpkg-runtest.sh : Set umask 022.

2006-12-06 Jim Garlick <garlick@llnl.gov>

	* : tag 1.0-4

	* dpkg-lint.sh : Use more portable, old-style find -perm +mode 
	instead of newer POSIX find -perm /mode.

2006-12-05 Jim Garlick <garlick@llnl.gov>

	* : tag 1.0-3

	* dpkg-mkdeb.sh : Add -p option to override package file location,
	needed for building kernel-source dpkg's.

	* dpkg-policy.conf : Added srcdir for location of kernel source.

2006-12-05 Jim Garlick <garlick@llnl.gov>

	* : tag 1.0-2

	* dpkg-unpackaged.sh : Arguments are subdirectories to be checked.

	* dpkg-mkdeb.sh : The preinst postinst prerm postrm test scripts
	are now created from either contents of PKG_scriptname in package.conf
	or from a file package.scriptname.  Similarly, the conffiles and docs
	files are created from PKG_file or package.file.  The pkg_metadata()
	call is now deprecated.

	* package.conf : Update to reflect the above change.

	* package.test : Test script is here now.

	* dpkg-mkdeb.sh : Make PKG_RELEASE mandatory.

	* dpkg-mkdeb.sh : Run a chmod go=u-w on packaged files.

2006-12-04 Jim Garlick <garlick@llnl.gov>

	* dpkg-lint.sh : New.

	* dpkg-policy.conf : New.

2006-12-02 Jim Garlick <garlick@llnl.gov>

	* dpkg-editdeb.sh : Force "edited.date" To be appended to revision.

2006-12-01 Jim Garlick <garlick@llnl.gov>

	* : tag 1.0-1

	* dpkg-docreport.sh : Fail early if not superuser.

	* dpkg-test.sh : Make one output file per test and delete it 
	on success.  Summarize tests run vs test failed at the end.

	* dpkg-mkdeb.sh : Define macros for /usr/local directories like
	rpm does.  Override with /usr/local/etc/dpkg-policy.conf if any.
	Use --force in svn export to deal with existing tmpdir.

2006-11-30 Jim Garlick <garlick@llnl.gov>

	* dpkg-test.sh : New.

	* dpkg-mkdeb.sh : Fix pkg_build and pkg_install environments so
	set -e actually works.
